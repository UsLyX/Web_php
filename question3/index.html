<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <select type="text" class="country" placeholder="Введите страну">
        <option disabled selected>Выберите страну</option>
    </select>
    <button type="button" class="btn1">Далее</button>
    <select type="text" hidden class="region" placeholder="Введите регион">
        <option disabled selected>Выберите регион</option>
    </select>
    <button type="button" hidden class="btn2">Далее</button>
    <select type="text" hidden class="city" placeholder="Введите город">
        <option disabled selected>Выберите город</option>
    </select>
    <button type="button" hidden class="btn3">Отправить</button>

    <div id="information"></div>

    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
    <script>
        const country =  document.querySelector('.country');
        const region =  document.querySelector('.region');
        const city =  document.querySelector('.city');
        const btn1 = document.querySelector('.btn1');
        const btn2 = document.querySelector('.btn2');
        const btn3 = document.querySelector('.btn3');

        let d = '';


        function success(data){
          console.log(data)
          d = data
          data.forEach(item => {
            country.innerHTML += `<option>${item.country.name}</option>`
          });
        }

        btn1.addEventListener('click', (event) => {
            if(country.value != "Выберите страну"){
                country.setAttribute('disabled', '');
                event.target.setAttribute('hidden', '')
                switch(country.value){
                    case 'Российская Федерация':
                        d[0].country.regions.forEach(item => {
                            region.innerHTML += `<option>${item.name}</option>`
                        });
                        break;
                    case 'Беларусь':
                        d[1].country.regions.forEach(item => {
                            region.innerHTML += `<option>${item.name}</option>`
                        })
                        break;
                    case 'Соединённые Штаты Америки':
                        d[2].country.regions.forEach(item => {
                            region.innerHTML += `<option>${item.name}</option>`
                        })
                        break;
                }
                region.removeAttribute('hidden')
                region.nextElementSibling.removeAttribute('hidden')
            }
        })
        btn2.addEventListener('click', (event) => {
            if(region.value != 'Выберите регион'){
                region.setAttribute('disabled', '');
                event.target.setAttribute('hidden', '') 

                if(country.value == 'Российская Федерация'){
                    switch(region.value){
                        case 'Московская область':
                            d[0].country.regions[0].cities.forEach(item => {
                                city.innerHTML += `<option>${item.name}</option>`
                            })
                            break;
                        case 'Воронежская область':
                            d[0].country.regions[1].cities.forEach(item => {
                                city.innerHTML += `<option>${item.name}</option>`
                            })
                            break;
                        case 'Липецкая область': 
                            d[0].country.regions[2].cities.forEach(item => {
                                city.innerHTML += `<option>${item.name}</option>`
                            })
                            break;      
                    }
                 }
                else if(country.value == 'Беларусь'){
                    switch(region.value){
                        case 'Брестская область':
                            d[1].country.regions[0].cities.forEach(item => {
                                city.innerHTML += `<option>${item.name}</option>`
                            })
                            break;
                        case 'Витебская область':
                            d[1].country.regions[1].cities.forEach(item => {
                                city.innerHTML += `<option>${item.name}</option>`
                            })
                            break;
                        case 'Гомельская область': 
                            d[1].country.regions[2].cities.forEach(item => {
                                city.innerHTML += `<option>${item.name}</option>`
                            })
                            break;      
                    }
                }
                else if(country.value == 'Соединённые Штаты Америки'){
                    switch(region.value){
                        case 'Штат Калифорния':
                            d[2].country.regions[0].cities.forEach(item => {
                                city.innerHTML += `<option>${item.name}</option>`
                            })
                            break;
                        case 'Штат Аризона':
                            d[2].country.regions[1].cities.forEach(item => {
                                city.innerHTML += `<option>${item.name}</option>`
                            })
                            break;
                        case 'Штат Техас': 
                            d[2].country.regions[2].cities.forEach(item => {
                                city.innerHTML += `<option>${item.name}</option>`
                            })
                            break;      
                    }
                }

                city.removeAttribute('hidden')
                city.nextElementSibling.removeAttribute('hidden')
            }
        })

        btn3.addEventListener('click', () => {
            if(city.value != 'Выберите город'){
                document.getElementById('information').innerHTML += `Ваша страна: ${country.value};     Ваш регион: ${region.value};        Ваш город: ${city.value};`;
            }
        })

        function connect() {
            $.ajax({
                url: "countries.json",
                type: "GET",
                data: {},
                dataType: "json", 
                success: success,
            })
        }

        window.onload = connect;

    </script>
</body>
</html>